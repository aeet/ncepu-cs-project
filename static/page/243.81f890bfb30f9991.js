"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[243],{6243:(R,c,n)=>{n.r(c),n.d(c,{ClassModule:()=>z});var d=n(4715),m=n(9132),C=n(8989),g=n(4004),s=n(4650),v=n(5957),y=n(5156),f=n(7360);const j=["simple"];const S=[{path:"list",component:(()=>{class t{_onReuseInit(e){this.simple?.ngOnInit()}get classService(){return this.service.init({path:"class"}),this.service}get majorService(){return this.service.init({path:"major"}),this.service}constructor(e,i){this.service=e,this.modal=i,this.schema={properties:{name:{type:"string",ui:{i18n:"name",widget:"string"}},code:{type:"string",ui:{i18n:"code",widget:"string"}},description:{type:"string",ui:{i18n:"description",widget:"string"}},type:{type:"string",ui:{i18n:"type",widget:"string"}}}},this.title="\u73ed\u7ea7\u7ba1\u7406",this.path="class",this.columns=[{title:"\u540d\u79f0",type:"",index:"name"},{title:"\u7f16\u53f7",type:"",index:"code"},{title:"\u63cf\u8ff0",type:"",index:"description"},{title:"\u7c7b\u578b",type:"",index:"type"}],this.buttons=[{text:"\u5173\u8054\u4e13\u4e1a",click:a=>{let u={};const I={properties:{major:{title:"\u4e13\u4e1a",type:"string",ui:{widget:"select",asyncData:()=>this.majorService.query().pipe((0,g.U)(r=>r.body.map(h=>({label:h.name,value:h.id}))))}}}},l=this.modal.create({nzTitle:"\u5173\u8054\u4e13\u4e1a",nzContent:C.kJ,nzComponentParams:{schema:{properties:{}},formData:{major:a?.edges?.major?.id},button:null},nzOnOk:()=>{const r={...a,edges:{major:{id:u.major}}};return this.classService.update(r).toPromise().then(()=>{this._onReuseInit()})}});l.componentInstance?.formValueChange.subscribe(r=>{u=r.value}),l.componentInstance?.refreshSchema(I),l.componentInstance?.reset(),this.classService.init({schema:this.schema,title:this.title,path:this.path})}}]}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(v.S),s.Y36(y.Sf))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-class-list"]],viewQuery:function(e,i){if(1&e&&s.Gf(j,5),2&e){let a;s.iGM(a=s.CRH())&&(i.simple=a.first)}},decls:2,vars:5,consts:[[3,"buttons","schema","title","path","columns"],["simple",""]],template:function(e,i){1&e&&s._UZ(0,"app-simple",0,1),2&e&&s.Q6J("buttons",i.buttons)("schema",i.schema)("title",i.title)("path",i.path)("columns",i.columns)},dependencies:[f.B],encapsulation:2}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[m.Bz.forChild(S),m.Bz]}),t})(),z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[d.m8,M]}),t})()}}]);