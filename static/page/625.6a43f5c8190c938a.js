"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[625],{2625:(b,l,i)=>{i.r(l),i.d(l,{MajorModule:()=>w});var h=i(4715),y=i(8989),g=i(4004),n=i(4650),v=i(5957),j=i(5156),f=i(7360);const M=["simple"];let m=(()=>{class t{_onReuseInit(e){this.simple?.ngOnInit()}get departmentService(){return this.service.init({path:"department"}),this.service}get majorService(){return this.service.init({path:"major"}),this.service}constructor(e,s){this.service=e,this.modal=s,this.schema={properties:{name:{type:"string",ui:{i18n:"name",widget:"string"}},code:{type:"string",ui:{i18n:"code",widget:"string"}},description:{type:"string",ui:{i18n:"description",widget:"string"}},special_type:{type:"string",ui:{i18n:"special_type",widget:"string"}},enrollment_type:{type:"string",ui:{i18n:"enrollment_type",widget:"string"}},is_major_category:{type:"boolean",ui:{i18n:"is_major_category",widget:"boolean"}},major_category:{type:"string",ui:{i18n:"major_category",widget:"string"}}}},this.title="\u4e13\u4e1a\u7ba1\u7406",this.path="major",this.columns=[{title:"\u540d\u79f0",type:"",index:"name"},{title:"\u4ee3\u7801",type:"",index:"code"},{title:"\u63cf\u8ff0",type:"",index:"description"},{title:"\u7279\u6b8a\u7c7b\u578b",type:"",index:"special_type"},{title:"\u62db\u751f\u7c7b\u578b",type:"",index:"enrollment_type"},{title:"\u662f\u5426\u4e13\u4e1a\u5927\u7c7b",type:"",index:"is_major_category"},{title:"\u4e13\u4e1a\u5927\u7c7b",type:"",index:"major_category"}],this.buttons=[{text:"\u5173\u8054\u7cfb\u90e8",click:r=>{let d={};const z={properties:{department:{title:"\u7cfb\u90e8",type:"string",ui:{widget:"select",asyncData:()=>this.departmentService.query().pipe((0,g.U)(p=>p.body.map(u=>({label:u.name,value:u.id}))))}}}},a=this.modal.create({nzTitle:"\u5173\u8054\u7cfb\u90e8",nzContent:y.kJ,nzComponentParams:{schema:{properties:{}},formData:{department:r?.edges?.department?.id},button:null},nzOnOk:()=>(r={...r,edges:{department:{id:d.department}}},this.majorService.update(r).toPromise().then(()=>{this._onReuseInit()}))});a.componentInstance?.formValueChange.subscribe(p=>{d=p.value}),a.componentInstance?.refreshSchema(z),a.componentInstance?.reset(),this.majorService.init({schema:this.schema,title:this.title,path:this.path})}}]}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(v.S),n.Y36(j.Sf))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-major-list"]],viewQuery:function(e,s){if(1&e&&n.Gf(M,5),2&e){let r;n.iGM(r=n.CRH())&&(s.simple=r.first)}},decls:2,vars:5,consts:[[3,"buttons","schema","title","path","columns"],["simple",""]],template:function(e,s){1&e&&n._UZ(0,"app-simple",0,1),2&e&&n.Q6J("buttons",s.buttons)("schema",s.schema)("title",s.title)("path",s.path)("columns",s.columns)},dependencies:[f.B],encapsulation:2}),t})();var c=i(9132);const C=[{path:"list",component:m}];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[c.Bz.forChild(C),c.Bz]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[h.m8,S]}),t})()}}]);